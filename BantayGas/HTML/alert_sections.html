<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BANTAYGAS - Alert Sections</title>
	<link rel="stylesheet" href="../CSS/alert_sections.css">
	<link rel="stylesheet" href="../CSS/notifications.css">
</head>
<body>
	<div class="layout">

        <aside class="sidebar" id="sidebar">
			<div class="profile">
				<div class="avatar"></div>
				<div class="profile-info">
					<div class="name">Josh Baguio</div>
					<div class="role">Admin</div>
                    <a class="view-profile" href="profile.html">View Profile Info</a>
				</div>
			</div>

			<nav class="nav">
                <a class="nav-item" href="monitoring.html">
					<span class="icon">üîç</span>
					<span>Monitoring</span>
				</a>
                <a class="nav-item" href="sensors.html">
					<span class="icon">üì°</span>
					<span>Sensors</span>
				</a>
                <a class="nav-item active" href="alert_sections.html">
					<span class="icon">‚ö†Ô∏è</span>
					<span>Alert Section</span>
				</a>
                <a class="nav-item" href="user_management.html">
					<span class="icon">üë•</span>
					<span>Staff Management</span>
				</a>
                <a class="nav-item" href="settings.html">
					<span class="icon">‚öôÔ∏è</span>
					<span>Settings</span>
				</a>
			</nav>

			<button class="logout-btn">Logout</button>
		</aside>

		<main class="content">
			<header class="page-header">
				<div class="header-left">
                    <h1>Alert Management</h1>
				</div>
				<div class="header-right">
                    <button class="btn btn-primary" onclick="clearAllAlerts()">
							<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3,6 5,6 21,6"/>
                            <path d="M19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"/>
							</svg>
                        Clear All Alerts
						</button>
				</div>
			</header>

            <!-- Alert Summary -->
            <section class="alert-summary">
                <div class="summary-card critical">
                    <div class="summary-icon">üö®</div>
                    <div class="summary-content">
                        <h3>Critical Alerts</h3>
                        <div class="summary-count">3</div>
                        <p>Immediate action required</p>
										</div>
										</div>
                <div class="summary-card warning">
                    <div class="summary-icon">‚ö†Ô∏è</div>
                    <div class="summary-content">
                        <h3>Warning Alerts</h3>
                        <div class="summary-count">5</div>
                        <p>Monitor closely</p>
										</div>
										</div>
                <div class="summary-card info">
                    <div class="summary-icon">‚ÑπÔ∏è</div>
                    <div class="summary-content">
                        <h3>Info Alerts</h3>
                        <div class="summary-count">12</div>
                        <p>System notifications</p>
										</div>
										</div>
            </section>

            <!-- Alert Filters -->
            <section class="alert-filters">
                <div class="filter-group">
                    <label for="alertType">Filter by Type:</label>
                    <select id="alertType">
                        <option value="">All Alerts</option>
                        <option value="critical">Critical</option>
                        <option value="warning">Warning</option>
                        <option value="info">Info</option>
                    </select>
										</div>
                <div class="filter-group">
                    <label for="alertSensor">Filter by Sensor:</label>
                    <select id="alertSensor">
                        <option value="">All Sensors</option>
                        <option value="sensor_001">Sensor_001</option>
                        <option value="sensor_002">Sensor_002</option>
                        <option value="sensor_003">Sensor_003</option>
                    </select>
										</div>
                <div class="filter-group">
                    <label for="alertTime">Time Range:</label>
                    <select id="alertTime">
                        <option value="all">All Time</option>
                        <option value="1h">Last Hour</option>
                        <option value="24h">Last 24 Hours</option>
                        <option value="7d">Last 7 Days</option>
                    </select>
										</div>
            </section>

            <!-- Alert List -->
            <section class="alert-list">
                <div class="alert-item critical">
                    <div class="alert-icon">üö®</div>
                    <div class="alert-content">
                        <div class="alert-header">
                            <h3>Critical Gas Level Detected</h3>
                            <span class="alert-time">2 minutes ago</span>
										</div>
                        <p class="alert-description">Sensor_001 detected CO levels at 88 ppm (threshold: 70 ppm)</p>
                        <div class="alert-details">
                            <span class="alert-sensor">Sensor_001 (MQ-7)</span>
                            <span class="alert-location">Boiler Room - Ground Floor</span>
										</div>
										</div>
                    <div class="alert-actions">
                        <button class="btn btn-sm btn-primary" onclick="acknowledgeAlert(this)">Acknowledge</button>
                        <button class="btn btn-sm btn-secondary" onclick="viewDetails(this)">Details</button>
										</div>
										</div>

                <div class="alert-item critical">
                    <div class="alert-icon">üö®</div>
                    <div class="alert-content">
                        <div class="alert-header">
                            <h3>Critical Gas Level Detected</h3>
                            <span class="alert-time">5 minutes ago</span>
										</div>
                        <p class="alert-description">Sensor_002 detected CO levels at 95 ppm (threshold: 70 ppm)</p>
                        <div class="alert-details">
                            <span class="alert-sensor">Sensor_002 (MQ-7)</span>
                            <span class="alert-location">Kitchen Area - First Floor</span>
										</div>
										</div>
                    <div class="alert-actions">
                        <button class="btn btn-sm btn-primary" onclick="acknowledgeAlert(this)">Acknowledge</button>
                        <button class="btn btn-sm btn-secondary" onclick="viewDetails(this)">Details</button>
										</div>
										</div>

                <div class="alert-item warning">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div class="alert-content">
                        <div class="alert-header">
                            <h3>High Temperature Warning</h3>
                            <span class="alert-time">15 minutes ago</span>
										</div>
                        <p class="alert-description">Temperature sensor detected 45¬∞C (threshold: 40¬∞C)</p>
                        <div class="alert-details">
                            <span class="alert-sensor">Temp_Sensor_001</span>
                            <span class="alert-location">Server Room - Basement</span>
										</div>
										</div>
                    <div class="alert-actions">
                        <button class="btn btn-sm btn-primary" onclick="acknowledgeAlert(this)">Acknowledge</button>
                        <button class="btn btn-sm btn-secondary" onclick="viewDetails(this)">Details</button>
										</div>
										</div>

                <div class="alert-item info">
                    <div class="alert-icon">‚ÑπÔ∏è</div>
                    <div class="alert-content">
                        <div class="alert-header">
                            <h3>Sensor Maintenance Due</h3>
                            <span class="alert-time">1 hour ago</span>
										</div>
                        <p class="alert-description">Sensor_004 requires scheduled maintenance</p>
                        <div class="alert-details">
                            <span class="alert-sensor">Sensor_004 (MQ-2)</span>
                            <span class="alert-location">Storage Area - Ground Floor</span>
										</div>
										</div>
                    <div class="alert-actions">
                        <button class="btn btn-sm btn-primary" onclick="acknowledgeAlert(this)">Acknowledge</button>
                        <button class="btn btn-sm btn-secondary" onclick="viewDetails(this)">Details</button>
					</div>
				</div>
			</section>
		</main>
	</div>

	<script>
        // Filter functionality
        document.getElementById('alertType').addEventListener('change', filterAlerts);
        document.getElementById('alertSensor').addEventListener('change', filterAlerts);
        document.getElementById('alertTime').addEventListener('change', filterAlerts);

        function filterAlerts() {
            const typeFilter = document.getElementById('alertType').value;
            const sensorFilter = document.getElementById('alertSensor').value;
            const timeFilter = document.getElementById('alertTime').value;

            const alerts = document.querySelectorAll('.alert-item');
            
            alerts.forEach(alert => {
                let show = true;
                
                // Type filter
                if (typeFilter && !alert.classList.contains(typeFilter)) {
                    show = false;
                }
                
                // Sensor filter
                if (sensorFilter) {
                    const sensorSpan = alert.querySelector('.alert-sensor');
                    if (sensorSpan && !sensorSpan.textContent.toLowerCase().includes(sensorFilter.toLowerCase())) {
                        show = false;
                    }
                }
                
                alert.style.display = show ? 'flex' : 'none';
            });
        }

        function acknowledgeAlert(button) {
            const alertItem = button.closest('.alert-item');
            alertItem.style.opacity = '0.6';
            button.textContent = 'Acknowledged';
            button.disabled = true;
            button.classList.remove('btn-primary');
            button.classList.add('btn-secondary');
            
            // Update summary counts
            updateSummaryCounts();
        }

        function viewDetails(button) {
            const alertItem = button.closest('.alert-item');
            const alertTitle = alertItem.querySelector('h3').textContent;
            const alertDescription = alertItem.querySelector('.alert-description').textContent;
            
            alert(`Alert Details:\n\n${alertTitle}\n\n${alertDescription}`);
        }

        function clearAllAlerts() {
            if (confirm('Are you sure you want to clear all alerts? This action cannot be undone.')) {
                const alerts = document.querySelectorAll('.alert-item');
                alerts.forEach(alert => {
                    alert.style.display = 'none';
                });
                
                // Reset summary counts
                document.querySelector('.summary-card.critical .summary-count').textContent = '0';
                document.querySelector('.summary-card.warning .summary-count').textContent = '0';
                document.querySelector('.summary-card.info .summary-count').textContent = '0';
            }
        }

        function updateSummaryCounts() {
            const criticalAlerts = document.querySelectorAll('.alert-item.critical:not([style*="display: none"])').length;
            const warningAlerts = document.querySelectorAll('.alert-item.warning:not([style*="display: none"])').length;
            const infoAlerts = document.querySelectorAll('.alert-item.info:not([style*="display: none"])').length;
            
            document.querySelector('.summary-card.critical .summary-count').textContent = criticalAlerts;
            document.querySelector('.summary-card.warning .summary-count').textContent = warningAlerts;
            document.querySelector('.summary-card.info .summary-count').textContent = infoAlerts;
        }
	</script>
	<script src="../JS/backend.js"></script>
	<script src="../JS/alerts.js"></script>
</body>
</html>
