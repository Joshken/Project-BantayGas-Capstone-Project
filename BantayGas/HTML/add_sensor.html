<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BANTAYGAS - Add Sensor</title>
    	<link rel="stylesheet" href="../CSS/add_sensor.css">
</head>
<body>
    
    <div class="layout">
        <aside class="sidebar">
            <div class="profile">
                <div class="avatar"></div>
                <div class="profile-info">
                    <div class="name">Josh Baguio</div>
                    <div class="role">Admin</div>
                    <a class="view-profile" href="profile.html">View Profile Info</a>
                </div>
            </div>

            <nav class="nav">
                <a class="nav-item" href="monitoring.html">
                    <span class="icon">üîç</span>
                    <span>Monitoring</span>
                </a>
                <a class="nav-item" href="sensors.html">
                    <span class="icon">üì°</span>
                    <span>Sensors</span>
                </a>
                <a class="nav-item" href="alert_sections.html">
                    <span class="icon">‚ö†Ô∏è</span>
                    <span>Alert Section</span>
                </a>
                <a class="nav-item" href="user_management.html">
                    <span class="icon">üë•</span>
                    <span>Staff Management</span>
                </a>
                <a class="nav-item" href="settings.html">
                    <span class="icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </a>
            </nav>

            <button class="logout-btn">Logout</button>
        </aside>

        <main class="content">
            <header class="page-header">
                <div class="header-left">
                    <a href="sensors.html" class="back-link">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15,18 9,12 15,6"/>
                        </svg>
                    </a>
                    <h1>Add New Sensor</h1>
                </div>
            </header>

            <section class="sensor-form-section">
                <div class="form-card">
                    <h2>Sensor Configuration</h2>
                    
                    <form class="sensor-form">
                        <div class="form-group">
                            <label for="sensorName">Sensor Name *</label>
                            <input type="text" id="sensorName" placeholder="e.g., Sensor_007" required>
                        </div>

                        <div class="form-group">
                            <label for="sensorType">Sensor Type *</label>
                            <select id="sensorType" required>
                                <option value="">Select Sensor Type</option>
                                <option value="MQ-7">MQ-7 (Carbon Monoxide)</option>
                                <option value="MQ-2">MQ-2 (Smoke/LPG)</option>
                                <option value="MQ-4">MQ-4 (Methane)</option>
                                <option value="MQ-135">MQ-135 (Air Quality)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="assignedZone">Assigned Zone *</label>
                            <input type="text" id="assignedZone" placeholder="e.g., Kitchen Area, Boiler Room" required>
                        </div>

                        <div class="form-group">
                            <label for="floor">Floor *</label>
                            <select id="floor" required>
                                <option value="">Select Floor</option>
                                <option value="ground">Ground Floor</option>
                                <option value="first">First Floor</option>
                                <option value="second">Second Floor</option>
                                <option value="basement">Basement</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="threshold">Alert Threshold (ppm) *</label>
                            <input type="number" id="threshold" min="0" max="1000" placeholder="e.g., 70" required>
                            <small>Recommended: MQ-7: 70ppm, MQ-2: 150ppm, MQ-4: 200ppm</small>
                        </div>

                        <div class="form-group">
                            <label for="sensorLocation">Physical Location</label>
                            <input type="text" id="sensorLocation" placeholder="e.g., Near entrance, Corner of room">
                        </div>

                        <div class="form-group">
                            <label for="sensorDescription">Description</label>
                            <textarea id="sensorDescription" placeholder="Additional notes about this sensor..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enableNotifications" checked>
                                Enable notifications for this sensor
                            </label>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="window.location.href='sensors.html'">Cancel</button>
                            <button type="submit" class="btn btn-primary">Add Sensor</button>
                        </div>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.querySelector('.sensor-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('sensorName').value,
                type: document.getElementById('sensorType').value,
                zone: document.getElementById('assignedZone').value,
                floor: document.getElementById('floor').value,
                threshold: document.getElementById('threshold').value,
                location: document.getElementById('sensorLocation').value,
                description: document.getElementById('sensorDescription').value,
                notifications: document.getElementById('enableNotifications').checked
            };

            // Validate required fields
            if (!formData.name || !formData.type || !formData.zone || !formData.floor || !formData.threshold) {
                alert('Please fill in all required fields');
                return;
            }

            // Validate threshold based on sensor type
            const thresholds = {
                'MQ-7': { min: 10, max: 100, recommended: 70 },
                'MQ-2': { min: 50, max: 300, recommended: 150 },
                'MQ-4': { min: 100, max: 500, recommended: 200 },
                'MQ-135': { min: 50, max: 200, recommended: 100 }
            };

            const threshold = parseInt(formData.threshold);
            const sensorThreshold = thresholds[formData.type];
            
            if (threshold < sensorThreshold.min || threshold > sensorThreshold.max) {
                if (!confirm(`Threshold ${threshold}ppm is outside recommended range (${sensorThreshold.min}-${sensorThreshold.max}ppm). Continue anyway?`)) {
                    return;
                }
            }

            // Simulate adding sensor
            console.log('Adding sensor:', formData);
            alert('Sensor added successfully!');
            window.location.href = 'sensors.html';
        });

        // Auto-fill threshold based on sensor type
        document.getElementById('sensorType').addEventListener('change', function() {
            const thresholds = {
                'MQ-7': 70,
                'MQ-2': 150,
                'MQ-4': 200,
                'MQ-135': 100
            };
            
            if (thresholds[this.value]) {
                document.getElementById('threshold').value = thresholds[this.value];
            }
        });
    </script>
    	<script src="../JS/auth.js"></script>
</body>
</html>